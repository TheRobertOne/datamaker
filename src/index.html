<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>data数据生成</title>
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"
    />

    <style>
        div,
        body,
        html {
            margin: 0;
            padding: 0;
        }

        body,
        html {
            height: 100%;
        }

        .content {
            height: 100%;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .content-box {
            flex: 1;
            overflow: auto;
            padding: 20px 10px;
            position: relative;
        }

        #dv {
            float: right;
        }

        .api-box {
            position: fixed;

            box-sizing: border-box;
            overflow: auto;
            width: 600px;
            padding: 20px;
        }

        #addDv {
            display: inline-block;
            color: blue;
            cursor: pointer;
            padding: 5px;
            user-select: none;
        }

        .add-box {
            height: 50px;
            line-height: 50px;
            padding-left: 50px;
        }

        .add-box input {
            height: 30px;
            padding-left: 10px;
        }

        .add-box select {
            height: 30px;
            width: 150px;
        }

        .item-block {
            background: #d5c0ff40;
            margin-bottom: 20px;
            padding: 10px;

        }

        .item-block-item {
            display: inline-block;
            padding: 5px 10px;
            font-size: 22px;
        }

        .item-block-del {
            height: 30px;
        }

        .item-block-del span {
            float: right;
            user-select: none;
            cursor: pointer;
            background: #0095ff;
            color: #fff;
            padding: 4px 10px;
            border-radius: 4px;
            margin-right: 10px;
        }



        .box {
            margin: 2px;
            display: flex;
            background: #d5c0ff40;
            align-items: center;
        }

        .item {
            width: 50px;
            display: inline-block;

            padding: 5px 5px;
        }

        .item-u {
            width: 300px;
        }

        .item-s {
            display: inline-block;
        }

        .item-img {
            display: inline-block;

            height: 36px;

        }

        .item-img img {
            display: block;
            height: 100%;
        }

        .displayMask {
            position: fixed;
            top: 10px;
            left: 11px;
            background: #f6f6f6;
            width: 600px;
            height: 300px;
            padding: 20px;
            box-shadow: 2px 2px 7px #252525;
        }

        .displayMask select {
            margin-bottom: 20px;
        }

        .displayMask input {
            height: 30px;
            width: 200px;
            margin-bottom: 10px;
            padding-left: 10px;
        }

        .displayMaskHihhen {
            display: none;
        }

        #displayOk {
            display: inline-block;

            user-select: none;
            cursor: pointer;
            background: #0095ff;
            color: #fff;
            padding: 4px 10px;
            border-radius: 4px;
        }
    </style>
</head>

<body>
    <div class="content">
        <div class="add-box">
            <span>插入位置(不填默认插入到最后，0插入到第一位，类推):</span>
            <input type="text" id="insertInp">
            <span>type:</span>
            <select id="addType">
                <option value="display" selected>display:展示</option>
                <option value="cation">cation:分类</option>
                <option value="drow">drow:笔划练习题大写A</option>
                <option value="jigsaw">jigsaw:拼图题</option>
                <option value="read">read:跟读</option>
                <option value="survey">survey:普通互动题 问卷</option>
                <option value="choice">choice:单选</option>
            </select>
            <div id="addDv">添加</div>
        </div>
        <div class="content-box">
            <div id="dv"></div>
            <div class="api-box">
                <div id="contentItemBox">

                </div>
            </div>
        </div>


    </div>
    <div class="displayMask displayMaskHihhen">
        图片对齐方式
        <select id="displayRadioinp">
            <option value="1" selected>居中</option>
            <option value="2">自定义</option>
        </select>

        <div>
            x:
            <input type="text" id="displayjuzhongX">
        </div>
        <div>
            y默认90:
            <input type="text" id="displayjuzhongY">
        </div>

        <div>
            图片地址:
            <input type="text" id="displayImg">
        </div>
        <div id='displayOk'>
            确认
        </div>


    </div>
</body>

</html>
<script>
    //类型数据
    var dataType = {
        //展示
        display: {
            "type": "display",//展示题  ---静态的
            "id": 1,
            "state": "01",
            "page": 0,
            "content_type": "封面",
            "data": {
                "background_image": "",
                "overviewImage": "",
                "pos": {
                    "x": 400,
                    "y": 100
                },
                "title": "",
                "text_pos": {
                    "x": 460,
                    "y": 30
                },
                "font_size": 68,
                "fill_color": "#0a152a"
            }
        },
        //分类
        cation: {
            "type": "cation", //资源
            "id": 129,
            "state": "10",//题型
            "page": 128,
            "content_type": "",
            "data": {
                "title_img": "",
                "text_pos": {
                    "x": (1024 / 2) - (451 / 2),
                    "y": 90
                },
                "item": [{
                    "image": "./image/courseimg/tset/z5.png",
                    "pos": { "x": 50, "y": 0 }
                }],
                "groupA": [
                    {
                        "image": "./image/courseimg/tset/z1.png",
                        "pos": { "x": 87, "y": 445 },
                        "answer": [0, 1, 2]
                    },
                    {
                        "image": "./image/courseimg/tset/z2.png",
                        "pos": { "x": 687, "y": 445 },
                        "answer": [3, 4, 5]
                    },

                ],
                //拖动选项卡
                "groupB": [
                    {
                        "image": "./image/courseimg/tset/a.png",
                        "pos": { "x": 210, "y": 220 }
                    },
                    {
                        "image": "./image/courseimg/tset/a.png",
                        "pos": { "x": 210, "y": 120 }
                    },
                    {
                        "image": "./image/courseimg/tset/a.png",
                        "pos": { "x": 410, "y": 160 }
                    },
                    {
                        "image": "./image/courseimg/tset/A1.png",
                        "pos": { "x": 420, "y": 260 }
                    },
                    {
                        "image": "./image/courseimg/tset/A1.png",
                        "pos": { "x": 540, "y": 280 }
                    },
                    {
                        "image": "./image/courseimg/tset/A1.png",
                        "pos": { "x": 300, "y": 10 }
                    },
                    {
                        "image": "./image/game/ant_03.png",
                        "pos": { "x": 400, "y": 400 }
                    }
                ]
            }
        },
        //笔划练习题大写A
        drow: {
            "type": "drow", //资源
            "id": 129,
            "state": "13",//题型
            "page": 128,
            "content_type": "",
            "data": {
                "title_img": "./image/courseimg/29/29.png",
                "Pdata": [[[161.5, 29], [161.290966, 29.558306], [160.680928, 31.187648], [159.695482, 33.819662], [158.360224, 37.385984], [156.70075, 41.81825], [154.742656, 47.048096], [152.511538, 53.007158], [150.032992, 59.627072], [147.332614, 66.839474], [144.436, 74.57600000000001], [141.368746, 82.76828600000002], [138.15644799999998, 91.34796800000002], [134.824702, 100.24668200000004], [131.39910399999997, 109.39606400000005], [127.90524999999998, 118.72775000000004], [124.36873599999997, 128.17337600000005], [120.81515799999997, 137.66457800000006], [117.27011199999997, 147.1329920000001], [113.75919399999998, 156.5102540000001], [110.30799999999996, 165.72800000000012], [106.94212599999997, 174.7178660000001], [103.68716799999996, 183.41148800000008], [100.56872199999995, 191.74050200000008], [97.61238399999996, 199.6365440000001], [94.84374999999996, 207.03125000000006], [92.28841599999997, 213.85625600000012], [89.97197799999995, 220.04319800000013], [87.92003199999996, 225.52371200000007], [86.15817399999996, 230.22943400000008], [84.71199999999997, 234.0920000000001], [83.60710599999999, 237.04304600000006], [82.869088, 239.01420800000005], [82.52354199999999, 239.93712200000004]], [[161, 29], [161.203742, 29.558306], [161.798336, 31.187648], [162.758834, 33.819662], [164.060288, 37.385984], [165.67775, 41.81825], [167.586272, 47.048096], [169.760906, 53.007158], [172.176704, 59.627072], [174.808718, 66.839474], [177.632, 74.57600000000001], [180.621602, 82.76828600000002], [183.752576, 91.34796800000002], [186.999974, 100.24668200000004], [190.338848, 109.39606400000005], [193.74425000000002, 118.72775000000004], [197.191232, 128.17337600000005], [200.65484600000002, 137.66457800000006], [204.11014400000005, 147.1329920000001], [207.53217800000004, 156.5102540000001], [210.89600000000002, 165.72800000000012], [214.17666200000002, 174.7178660000001], [217.34921600000004, 183.41148800000008], [220.38871400000002, 191.74050200000008], [223.27020800000003, 199.6365440000001], [225.96875000000003, 207.03125000000006], [228.45939200000004, 213.85625600000012], [230.71718600000003, 220.04319800000013], [232.71718400000003, 225.52371200000007], [234.43443800000006, 230.22943400000008], [235.84400000000002, 234.0920000000001], [236.92092200000002, 237.04304600000006], [237.64025600000002, 239.01420800000005], [237.977054, 239.93712200000004]], [[109.5, 181.5], [109.787091, 181.506615], [110.624928, 181.52592], [111.978357, 181.557105], [113.812224, 181.59936], [116.091375, 181.651875], [118.780656, 181.71384], [121.84491299999999, 181.784445], [125.248992, 181.86288], [128.957739, 181.948335], [132.936, 182.04], [137.14862100000002, 182.137065], [141.560448, 182.23872], [146.13632700000002, 182.344155], [150.84110400000003, 182.45256], [155.63962500000002, 182.563125], [160.49673600000006, 182.67504], [165.37728300000003, 182.787495], [170.24611200000004, 182.89968], [175.06806900000004, 183.010785], [179.80800000000005, 183.12], [184.43075100000004, 183.226515], [188.90116800000004, 183.32952], [193.18409700000007, 183.428205], [197.24438400000005, 183.52176], [201.04687500000006, 183.609375], [204.55641600000004, 183.69024], [207.73785300000006, 183.763545], [210.55603200000004, 183.82848], [212.97579900000005, 183.884235], [214.96200000000007, 183.93], [216.47948100000005, 183.964965], [217.493088, 183.98832], [217.967667, 183.999255]]],
                "text_pos": {
                    "x": (1024 / 2) - (451 / 2),
                    "y": 90
                },
                "answerPos": {
                    "x": 150,
                    "y": 110
                },
                "zoom": 1.8,
                "paintSize": 50,
                "paintColor": '#58e438',
                "playcolor": "#cccccc",

                "item": [{
                    "image": "",
                    "pos": { "x": 50, "y": 158 }
                }],
                //linImage 0 起点 1 终点
                "linIcon": {
                    "start": "./image/game/ant_03.png",
                    "end": "./image/courseimg/tset/A1.png"
                }

            }
        },
        //拼图题ok
        jigsaw: {
            "type": "jigsaw", //资源
            "id": 29,
            "state": "09",//题型
            "page": 28,
            "content_type": "",
            "data": {
                "title_img": "./image/courseimg/29/29.png",
                "text_pos": {
                    "x": (1024 / 2) - (451 / 2),
                    "y": 90
                },
                "item": [{
                    "image": "./image/courseimg/29/29-05.png",
                    "pos": { "x": 50, "y": 158 }
                }],
                "groupA": [
                    {
                        "image": "./image/courseimg/29/29-01.png",
                        "pos": { "x": 87, "y": 249 },
                        "answer": 1
                    },
                    {
                        "image": "./image/courseimg/29/29-02.png",
                        "pos": { "x": 87, "y": 345 },
                        "answer": 2
                    },
                    {
                        "image": "./image/courseimg/29/29-03.png",
                        "pos": { "x": 87, "y": 440 },
                        "answer": 0
                    },
                    {
                        "image": "./image/courseimg/29/29-04.png",
                        "pos": { "x": 87, "y": 536 },
                        "answer": 3
                    }
                ],
                //拖动选项卡
                "groupB": [
                    {
                        "image": "./image/courseimg/29/29-06.png",
                        "pos": { "x": 690, "y": 250 }
                    },
                    {
                        "image": "./image/courseimg/29/29-07.png",
                        "pos": { "x": 690, "y": 345 }
                    },
                    {
                        "image": "./image/courseimg/29/29-08.png",
                        "pos": { "x": 690, "y": 440 }
                    },
                    {
                        "image": "./image/courseimg/29/29-09.png",
                        "pos": { "x": 690, "y": 536 }
                    }
                ]
            }
        },
        //跟读
        read: {
            "type": "read",
            "page": 1,
            "content_type": 0,
            "content": "Hello",
            "id": 2,
            "state": "02",
            "overviewImage": "",
            "data": {
                "image": "",
                "pos": {
                    "x": 0,
                    "y": 169
                },
                "title": "",
                "text_Image": "./image/courseimg/2.png",
                "text": "Hello",
                "text_pos": {
                    "x": (1024 / 2) - (191 / 2),
                    "y": 90
                },
                "font_size": 68,
                "fill_color": "#0099ff"
            }
        },
        //普通互动题  问卷 
        survey: {
            "type": "survey",
            "page": 2,
            "content_type": "",
            "content": "",
            "id": 3,
            "state": "07",
            "data": {
                "overviewImage": "",
                "pos": {
                    "x": 0,
                    "y": 169
                },
                "title": "",
                "titleImage": "./image/courseimg/3/3.png",
                "text_pos": {
                    "x": (1024 / 2) - (369 / 2),
                    "y": 90
                },
                "font_size": 68,
                "fill_color": "#000000",
                "body": [
                    {
                        "text": "",
                        "font_size": 68,
                        "fill_color": "#0099ff",
                        "image": "./image/courseimg/3/3-01.png",
                        "name": "a",
                        "nameNum": 0,
                        "pos": {
                            "x": 167,
                            "y": 209
                        },
                        "size": {
                            "w": 100,
                            "h": 100
                        }

                    },
                    {
                        "text": "",
                        "font_size": 68,
                        "fill_color": "#0099ff",
                        "image": "./image/courseimg/3/3-02.png",
                        "name": "b",
                        "nameNum": 0,
                        "pos": {
                            "x": 39,
                            "y": 455
                        },
                        "size": {
                            "w": 100,
                            "h": 100
                        }
                    },
                    {
                        "text": "",
                        "font_size": 68,
                        "fill_color": "#0099ff",
                        "image": "./image/courseimg/3/3-03.png",
                        "name": "c",
                        "nameNum": 0,
                        "pos": {
                            "x": 309,
                            "y": 455
                        },
                        "size": {
                            "w": 100,
                            "h": 100
                        }
                    }
                ]
            }
        },
        //单选
        choice: {
            "type": "choice",
            "page": 29,
            "content_type": "",
            "content": "",
            "id": 30,
            "state": "04",
            "data": {
                "title": "",
                "titleImage": "./image/courseimg/30/30.png",
                "text": "",
                "font_size": 42,
                "fill_color": "#0a152a",
                "text_pos": {
                    "x": (1024 / 2) - (643 / 2),
                    "y": 90
                },
                "background": "",
                "q_image": "", //单选展示
                "qAdimation": "rotate",
                "animation": "",
                "pos": {
                    "x": 0,
                    "y": 171
                },
                "body": [
                    {
                        "text": "",
                        "voice": "",
                        "allow": true,
                        "image": "./image/courseimg/30/30-01.png", //眼睛
                        "pos": {
                            "x": 34,
                            "y": 250
                        },
                        "size": {
                            "w": 343,
                            "h": 119
                        }
                    },
                    {
                        "text": "",
                        "voice": "",
                        "allow": true,
                        "image": "./image/courseimg/30/30-02.png", //左耳
                        "pos": {
                            "x": 34,
                            "y": 391
                        },
                        "size": {
                            "w": 343,
                            "h": 119
                        }
                    }, {
                        "text": "",
                        "voice": "",
                        "allow": true,
                        "image": "./image/courseimg/30/30-03.png", //左耳
                        "pos": {
                            "x": 34,
                            "y": 532
                        },
                        "size": {
                            "w": 343,
                            "h": 119
                        }
                    }

                ],

                "answer": 0
            }
        }
    };
</script>
<script>

    var ajax = new XMLHttpRequest();
    ajax.open("get", '/images');
    ajax.onreadystatechange = function () {
        if (ajax.readyState == 4 && ajax.status == 200) {
            var data = ajax.responseText;
            data = JSON.parse(data);

            var str = '';
            data.forEach(function (item) {
                str += `<div class="box">
        <span  class="item item-u" >${item['name']}</span>
        <span class="item-s">宽:</span>
        <span  class="item " >${item['w']}</span>
        <span class="item-s">高:</span>
        <span  class="item " >${item['h']}</span>
        <div class="item-img">
            <img src="${item['url']}" alt=""  />
            </div>
        
        </div>`;

            });
            dv.innerHTML = str;
        }
    };
    ajax.send(null);

</script>

<script>
    var el = document.querySelector('.content');
    var con = document.querySelector('.api-box');
    con.style.height = el.scrollHeight - 100 + 'px';

    window.onresize = function () {
        con.style.height = el.scrollHeight - 100 + 'px';
    };
    var apiData = [];
    addDv.onclick = function () {
        var len = apiData.length;
        var addItem = dataType[addType.value];
        addItem = JSON.parse(JSON.stringify(addItem));

        if ((insertInp.value || '').trim() === '') {

            addItem['id'] = len + 1;
            addItem['page'] = len;
            apiData.push(addItem);


        } else {
            addItem['id'] = parseInt(insertInp.value);
            addItem['ipaged'] = parseInt(insertInp.value) - 1;
            apiData.splice(parseInt(insertInp.value), 0, addItem);

        }

        apiData = apiData.map(function (item, index) {
            item['id'] = index + 1;
            item['page'] = index;
            return item;
        });

        render(apiData);


    };

    function render(apiData) {

        contentItemBox.innerHTML = '';
        for (var i = 0; i < apiData.length; i++) {
            var itemBox = document.createElement('div');
            var itemId = document.createElement('div');
            var itemType = document.createElement('div');
            var itemDel = document.createElement('div');
            var itemDelSpan = document.createElement('span');

            itemId.innerHTML = `id:${apiData[i]['id']}`;
            itemType.innerHTML = `type:${apiData[i]['type']}`;
            itemId.className = 'item-block-item';
            itemType.className = 'item-block-item';
            itemBox.appendChild(itemId);
            itemBox.appendChild(itemType);

            //题型display
            if (apiData[i]['type'] == 'display') {
                var bodyImgs = document.createElement('div');

                if (apiData[i]['data']['body']) {
                    bodyImgs.innerHTML = JSON.stringify(apiData[i]['data']['body']);
                    itemBox.appendChild(bodyImgs)
                }

                //添加图片
                var addDisplayPic = document.createElement('span');

                addDisplayPic.innerHTML = '添加图片';
                addDisplayPic.item = apiData[i];
                addDisplayPic.onclick = function () {

                    var displayMask = document.querySelector('.displayMask');
                    displayMask.className = 'displayMask';
                    //displayMask displayMaskHihhen
                    if (addDisplayPic.item['data']['body']) {
                        addDisplayPic.item['data']['body'].push(
                            { "image": "", "pos": { "x": (1024 / 2) - (605 / 2), "y": 90 } }
                        );
                    } else {
                        addDisplayPic.item['data']['body'] = [];
                        addDisplayPic.item['data']['body'].push(
                            { "image": "", "pos": { "x": (1024 / 2) - (605 / 2), "y": 90 } }
                        );
                    }
                    displayOk.innerHTML = '确认,' + '图片数量:' + addDisplayPic.item['data']['body'].length;
                    displayRadioinp.addPic = addDisplayPic.item['data']['body'];
                };

                itemDel.appendChild(addDisplayPic);

                //删除图片
                var delDisplayPic = document.createElement('span');
                delDisplayPic.innerHTML = '删除图片';
                delDisplayPic.item = apiData[i];

                delDisplayPic.onclick = function () {
                    delete delDisplayPic.item['data']['body'];
                    render(window.apiData);
                };
                itemDel.appendChild(delDisplayPic);





            }
            itemDelSpan.innerHTML = '删除';


            itemDelSpan.item = apiData[i];
            itemDelSpan.onclick = function (e) {
                var clickId = e.target.item;

                var temArr = [];
                for (var j = 0; j < apiData.length; j++) {
                    if (apiData[j]['id'] + '' != clickId['id'] + '') {
                        temArr.push(apiData[j]);
                    }
                }
                temArr = temArr.map(function (item, index) {
                    item['id'] = index + 1;
                    item['page'] = index;
                    return item;
                });
                window.apiData = temArr;
                render(temArr);

            };
            itemBox.className = "item-block";
            itemDel.className = 'item-block-del';
            itemDel.appendChild(itemDelSpan);

            itemBox.appendChild(itemDel);
            contentItemBox.appendChild(itemBox);


        }
    }


    displayOk.onclick = function () {
        var val = displayRadioinp.value + '';
        var arrs = displayRadioinp.addPic || [];
        var len = arrs.length;

        if (len > 0) {

            var obj = arrs[len - 1];


            var x = (displayjuzhongX.value || '').trim();
            x = x === '' ? 0 : x;
            var y = (displayjuzhongY.value || '').trim();

            y = y === '' ? 0 : y;


            if (val === '1') {

                obj['pos']['x'] = (1024 / 2) - (parseInt(x) / 2);

                obj['pos']['y'] = parseInt(y) || 90;
                obj['image'] = (displayImg.value || '').trim();
            } else {
                obj['pos']['x'] = parseInt(x);

                obj['pos']['y'] = parseInt(y) || 90;
                obj['image'] = (displayImg.value || '').trim();
            }
        }

        var el = document.querySelector('.displayMask');
        el.className = 'displayMask displayMaskHihhen';
        render(apiData);
    }


</script>